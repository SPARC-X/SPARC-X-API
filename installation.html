

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; SPARC-X-API  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configurations for SPARC-X-API" href="setup_environment.html" />
    <link rel="prev" title="SPARC-X-API: A Python API for the SPARC-X DFT Code" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SPARC-X-API
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installting-the-api">Installting the API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-conda-recommended">Using <code class="docutils literal notranslate"><span class="pre">conda</span></code> (recommended)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-from-pypi">Install from PyPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-from-latest-source-code">Installing from latest source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install-the-sparc-binary-code">Install the SPARC binary code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#use-conda-toolchains">Use <code class="docutils literal notranslate"><span class="pre">conda</span></code> toolchains</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiling-sparc-on-hpc">Compiling SPARC on HPC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup_environment.html">Configurations for SPARC-X-API</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_usage.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_socket.html">Advanced Usage: SPARC-X-API as a Socket Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="package_components.html">SPARC-X-API Package Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_topics.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_changes.html">Changes in API</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="maintainers.html">Documentation for Maintainers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SPARC-X-API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/sparc-x/SPARC-X-API/blob/master/doc/installation.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h1>
<section id="installting-the-api">
<h2>Installting the API<a class="headerlink" href="#installting-the-api" title="Link to this heading"></a></h2>
<p>SPARC-X-API may be installed via the following approaches:</p>
<section id="using-conda-recommended">
<span id="use-conda"></span><h3>Using <a class="reference external" href="https://docs.conda.io/en/latest/"><code class="docutils literal notranslate"><span class="pre">conda</span></code></a> (recommended)<a class="headerlink" href="#using-conda-recommended" title="Link to this heading"></a></h3>
<p>You can use any of <a class="reference external" href="https://docs.anaconda.com/"><code class="docutils literal notranslate"><span class="pre">anaconda</span></code></a>,
<a class="reference external" href="https://docs.anaconda.com/miniconda/"><code class="docutils literal notranslate"><span class="pre">miniconda</span></code></a>, or
<a class="reference external" href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html"><code class="docutils literal notranslate"><span class="pre">micromamba</span></code></a>
tools to install a <code class="docutils literal notranslate"><span class="pre">conda</span></code> package engine.  The rest of the steps will
be made in a <a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#creating-an-environment-with-commands">conda
environment</a>
to get the latest release of SPARC-X-API that comes with the
pseudopotentials installed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Change &#39;sparc-env&#39; to your desired name if needed</span>
conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>sparc-env<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.11<span class="w"> </span>pip<span class="w"> </span>mamba
conda<span class="w"> </span>activate<span class="w"> </span>sparc-env
conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>sparc-x-api
</pre></div>
</div>
<p>On Linux platforms (x86_64, aarch64), you can also install the
pre-compiled SPARC DFT binaries alongside the API:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note the package name is sparc-x</span>
conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>sparc-x
<span class="c1"># Re-activate to have the env variables effective</span>
conda<span class="w"> </span>activate<span class="w"> </span>sparc-env
</pre></div>
</div>
</section>
<section id="install-from-pypi">
<span id="pypi-install"></span><h3>Install from <a class="reference external" href="https://pypi.org/project/sparc-x-api/">PyPI</a><a class="headerlink" href="#install-from-pypi" title="Link to this heading"></a></h3>
<p>If you prefer using <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install SPARC-X-API, there is also a
<a class="reference external" href="https://pypi.org/project/sparc-x-api/">mirror package on PyPI</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>sparc-x-api
</pre></div>
</div>
<p>The pseudopotential files will also be installed in this approach. If you wish to compile the SPARC C/C++ code, please refer to the <a class="reference internal" href="#install-binary">manual installation</a>.</p>
</section>
<section id="installing-from-latest-source-code">
<span id="pip-install"></span><h3>Installing from latest source code<a class="headerlink" href="#installing-from-latest-source-code" title="Link to this heading"></a></h3>
<p>The latest version of the SPARC-X-API can also be installed using <code class="docutils literal notranslate"><span class="pre">pip</span></code> from the source code on Github.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/SPARC-X/SPARC-X-API
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pseudopotential files should be manually downloaded in this case.</p>
</div>
<p>You can download the latest SPMS pseudopotentials and unpacks the pseudopotential files into <code class="docutils literal notranslate"><span class="pre">&lt;python-lib-root&gt;/site-packages/sparc/psp</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>sparc.download_data
</pre></div>
</div>
<p>For developers, please check the <a class="reference internal" href="#setting-up-environment"><span class="xref myst">how to
contribute</span></a> page for setting up a dev-environment for SPARC-X-API.</p>
</section>
</section>
<section id="install-the-sparc-binary-code">
<span id="install-binary"></span><h2>Install the SPARC binary code<a class="headerlink" href="#install-the-sparc-binary-code" title="Link to this heading"></a></h2>
<p>To utilize the API for drive SPARC calculations, please following the
<a class="reference external" href="https://github.com/SPARC-X/SPARC">SPARC manual</a> for compilation and
installation of the SPARC DFT code itself.</p>
<p>We recommend using the <a class="reference internal" href="#use-conda"><code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> package</a> to install
the pre-compiled SPARC binary. If you want to compile the latest SPARC
C/C++, it is also straightforward:</p>
<section id="use-conda-toolchains">
<h3>Use <code class="docutils literal notranslate"><span class="pre">conda</span></code> toolchains<a class="headerlink" href="#use-conda-toolchains" title="Link to this heading"></a></h3>
<p>In the previously configured <code class="docutils literal notranslate"><span class="pre">sparc-env</span></code> environment, install the
build dependencies and compile.</p>
<p>The following process compilers SPARC
with OpenMPI/OpenBLAS/Scalapack toolchains.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>sparc-env
mamba<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span><span class="se">\</span>
<span class="w">                 </span>make<span class="w"> </span>compilers<span class="w"> </span><span class="se">\</span>
<span class="w">				 </span><span class="nv">fftw</span><span class="o">=</span>*<span class="o">=</span>mpi_openmpi_*<span class="w"> </span><span class="se">\</span>
<span class="w">				 </span>openblas<span class="w"> </span>openmpi<span class="w"> </span>scalapack
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/SPARC-X/SPARC.git
<span class="nb">cd</span><span class="w"> </span>SPARC/src
make<span class="w"> </span><span class="nv">USE_MKL</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">USE_SCALAPACK</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">USE_FFTW</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p>The compiled binary will be at <code class="docutils literal notranslate"><span class="pre">SPARC/lib/sparc</span></code>, and will run when
<code class="docutils literal notranslate"><span class="pre">sparc-env</span></code> environment is activated.</p>
<p><strong>TODO</strong> MKL available?</p>
</section>
<section id="compiling-sparc-on-hpc">
<h3>Compiling SPARC on HPC<a class="headerlink" href="#compiling-sparc-on-hpc" title="Link to this heading"></a></h3>
<p>High Performance Clusters (HPC) machines usually have some specific
requirements about the parallel and numerical library setups. While
conda installation works in most cases, it is often true to compile
SPARC with existing MPI/MKL/BLAS libraries to ensure optimal
performance. The following example shows the compilation with Intel
MKL/MPICH on Georgia Tech’s <a class="reference external" href="https://sites.gatech.edu/ewanparktest/phoenix-cluster/">Pheonix Cluster</a>:</p>
<p><strong>TODO</strong> make sure modules are correct.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>git<span class="w"> </span>intel-one-api<span class="w"> </span>fftw
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/SPARC-X/SPARC.git
<span class="nb">cd</span><span class="w"> </span>SPARC/src
make<span class="w"> </span><span class="nv">USE_MKL</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">USE_SCALAPACK</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">USE_FFTW</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p><strong>TODO</strong> add module in script.</p>
<p>The compiled binary will be at <code class="docutils literal notranslate"><span class="pre">SPARC/lib/sparc</span></code>, and running it
requires the dependent modules to be loaded at runtime.</p>
<p>Now head to the <a class="reference internal" href="setup_environment.html"><span class="std std-doc">setup tutorial</span></a> to finetune
your settings.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="SPARC-X-API: A Python API for the SPARC-X DFT Code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="setup_environment.html" class="btn btn-neutral float-right" title="Configurations for SPARC-X-API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, SPARC-X Developmers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>